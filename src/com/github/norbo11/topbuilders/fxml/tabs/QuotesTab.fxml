<?xml version="1.0" encoding="UTF-8"?>
<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.control.cell.TreeItemPropertyValueFactory?>

<VBox spacing="20" alignment="CENTER" xmlns:fx="http://javafx.com/fxml" fx:controller="com.github.norbo11.topbuilders.controllers.tabs.QuotesTab">
  <padding><Insets top="25" bottom="25" right="70" left="70" /></padding>
  
  <HBox spacing="20" alignment="TOP_CENTER">
    <Label text="Select quote to edit" />
    <ComboBox fx:id="projectPicker" onAction="#updateFields" prefWidth="300" />
  </HBox>
  
  <TreeTableView fx:id="table" showRoot="false" editable="true">
    <columnResizePolicy><TreeTableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
    <columns>
      <TreeTableColumn fx:id="titleCol" text="%jobs.title" editable="true">
        <cellValueFactory><TreeItemPropertyValueFactory property="title" /></cellValueFactory>
      </TreeTableColumn>
  
      <TreeTableColumn fx:id="descriptionCol" text="%jobs.description" editable="true">
        <cellValueFactory><TreeItemPropertyValueFactory property="description" /></cellValueFactory>
      </TreeTableColumn>
      
      <TreeTableColumn fx:id="materialsCol" text="%jobs.materials" />
      
      <TreeTableColumn fx:id="materialsCostCol" text="%jobs.materialsCost" prefWidth="200" editable="true" />
      
      <TreeTableColumn fx:id="labourCostCol" text="%jobs.labourCost" prefWidth="200" editable="true" />
      
      <TreeTableColumn fx:id="totalCostCol" text="%jobs.totalCost" prefWidth="200" />
    </columns>
    <root>
      <TreeItem value="Job Groups" expanded="true" />
    </root>
  </TreeTableView>
  
  <BorderPane>
    <left>
      <HBox spacing="40">
        <ComboBox fx:id="jobGroupCombo" />
        <Button text="%quotes.addJob" prefWidth="190" prefHeight="40" onAction="#addJobRow" />
      </HBox>
    </left>
    
    <right>
      <HBox spacing="40">
        <CheckBox fx:id="completedCheckBox" />
        <Label text="%quotes.completed" />
      </HBox>
    </right>
  </BorderPane>

  <HBox alignment="center" spacing="20">
    <GridPane hgap="10" vgap="10" alignment="top_center">  
      <Label wrapText="true" text="%quotes.projectDescription" GridPane.rowIndex="0" GridPane.columnIndex="0" />
      <TextArea wrapText="true" minHeight="30" fx:id="projectDescription" GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.rowSpan="4" />
      
      <Label wrapText="true" text="%quotes.projectNote" GridPane.rowIndex="4" GridPane.columnIndex="0" />
      <TextArea wrapText="true" minHeight="30" fx:id="projectNote" GridPane.rowIndex="4" GridPane.columnIndex="1" GridPane.rowSpan="4" />
    </GridPane>
    
    <GridPane HBox.hgrow="always" hgap="10" vgap="10" alignment="top_center">      
      <Label wrapText="true" text="%quotes.clientFirstName" GridPane.rowIndex="0" GridPane.columnIndex="0" />
      <TextField GridPane.hgrow="always" fx:id="firstName" GridPane.rowIndex="0" GridPane.columnIndex="1" />
      
      <Label wrapText="true" text="%quotes.clientLastName" GridPane.rowIndex="1" GridPane.columnIndex="0" />
      <TextField GridPane.hgrow="always" fx:id="lastName" GridPane.rowIndex="1" GridPane.columnIndex="1" />
      
      <Label wrapText="true" text="%quotes.clientEmail" GridPane.rowIndex="2" GridPane.columnIndex="0" />
      <TextField GridPane.hgrow="always" fx:id="email" GridPane.rowIndex="2" GridPane.columnIndex="1" />
      
      <Label wrapText="true" text="%quotes.clientContactNumber" GridPane.rowIndex="3" GridPane.columnIndex="0" />
      <TextField GridPane.hgrow="always" fx:id="contactNumber" GridPane.rowIndex="3" GridPane.columnIndex="1" />
      
      
      <Label wrapText="true" text="%general.address.firstLine" GridPane.rowIndex="0" GridPane.columnIndex="2" />
      <TextField GridPane.hgrow="always" fx:id="firstLineAddress" GridPane.rowIndex="0" GridPane.columnIndex="3" />
      
      <Label wrapText="true" text="%general.address.secondLine" GridPane.rowIndex="1" GridPane.columnIndex="2" />
      <TextField GridPane.hgrow="always" fx:id="secondLineAddress" GridPane.rowIndex="1" GridPane.columnIndex="3" />
      
      <Label wrapText="true" text="%general.address.city" GridPane.rowIndex="2" GridPane.columnIndex="2" />
      <TextField GridPane.hgrow="always" fx:id="city" GridPane.rowIndex="2" GridPane.columnIndex="3" />
      
      <Label wrapText="true" text="%general.address.postcode" GridPane.rowIndex="3" GridPane.columnIndex="2" />
      <TextField GridPane.hgrow="always" fx:id="postcode" GridPane.rowIndex="3" GridPane.columnIndex="3" />
      
  
      <Label wrapText="true" fx:id="errorsLabel" visible="false" text="%validation.errors" GridPane.rowIndex="4" GridPane.columnIndex="0" />
      <VBox fx:id="errorsList" GridPane.rowIndex="5" GridPane.columnIndex="0" GridPane.columnSpan="4" />
    </GridPane>
  </HBox>
  
  <HBox spacing="100" alignment="center">
    <Button text="%quotes.save" prefWidth="190" prefHeight="40" onAction="#saveProject" />
    <Button text="%quotes.export" prefWidth="190" prefHeight="40" onAction="#export" />
    <Button text="%quotes.viewMap" prefWidth="190" prefHeight="40" onAction="#viewMap" />
    <Button text="%quotes.settings" prefWidth="190" prefHeight="40" onAction="#settings" />
  </HBox> 
</VBox>